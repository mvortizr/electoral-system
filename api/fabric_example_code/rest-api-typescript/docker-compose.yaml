version: '3'
# Replace network name with the fabric test-network name 
services:
  redis: 
    image: 'redis'
    command: ['--maxmemory-policy','noeviction','--requirepass','${REDIS_PASSWORD}']
    ports:
      - 6379:6379
    networks:
      - voting_system
  # sha256:9ea47b75a75e5f21d8b8b1cce9a545cf2e5a8460afd0d07ad4fdd9420a40abd4
  nodeapp:
    image: 'ghcr.io/hyperledger/fabric-rest-sample:latest'
    command: ['start:dotenv']
    ports:
      - 3000:3000
    env_file:
      - ./.env
    environment:
      - REDIS_PASSWORD
    networks:
        - voting_system


networks:
  voting_system:
    external: true 
